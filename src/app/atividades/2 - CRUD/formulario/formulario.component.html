<form
  [formGroup]="form"
  style="display: flex; flex-direction: column; gap: 20px"
>
  <mat-form-field appearance="fill">
    <mat-label>Nome</mat-label>
    <input
      type="text"
      matInput
      placeholder="Digite algo"
      formControlName="nome"
    />
    <mat-error
      *ngIf="
        form.get('nome')?.invalid &&
        (form.get('nome')?.dirty || form.get('nome')?.touched)
      "
    >
      <span *ngIf="form.get('nome')?.hasError('required')"
        >O campo é obrigatório</span
      >
      <span *ngIf="form.get('nome')?.hasError('minlength')"
        >O campo deve ter no mínimo 3 caracteres</span
      >
      <span *ngIf="form.get('nome')?.hasError('maxlength')"
        >O campo deve ter no máximo 30 caracteres</span
      >
    </mat-error>
  </mat-form-field>
  <mat-form-field appearance="fill">
    <mat-label>Email</mat-label>
    <input
      type="text"
      matInput
      placeholder="Digite algo"
      formControlName="email"
    />
    <mat-error
      *ngIf="
        form.get('email')?.invalid &&
        (form.get('email')?.dirty || form.get('email')?.touched)
      "
    >
      <span *ngIf="form.get('email')?.hasError('required')"
        >O campo é obrigatório</span
      >

      <span *ngIf="form.get('email')?.hasError('email')"
        >Formato inválido de email</span
      >
    </mat-error>
  </mat-form-field>
  <mat-form-field appearance="fill">
    <mat-label>Senha</mat-label>
    <input
      type="text"
      matInput
      placeholder="Digite algo"
      formControlName="senha"
    />
    <mat-error
      *ngIf="
        form.get('senha')?.invalid &&
        (form.get('senha')?.dirty || form.get('senha')?.touched)
      "
    >
      <span *ngIf="form.get('senha')?.hasError('required')"
        >O campo é obrigatório</span
      >

      <span *ngIf="form.get('senha')?.hasError('minlength')"
        >O campo deve ter no mínimo 6 caracteres</span
      >
    </mat-error>
  </mat-form-field>
  <mat-form-field appearance="fill">
    <mat-label>CEP</mat-label>
    <input
      type="text"
      matInput
      placeholder="Digite algo"
      formControlName="cep"
      (change)="buscarLogradouro()"
    />
    <mat-error
      *ngIf="
        form.get('cep')?.invalid &&
        (form.get('cep')?.dirty || form.get('cep')?.touched)
      "
    >
      <span *ngIf="form.get('cep')?.hasError('required')"
        >O campo é obrigatório</span
      >

      <span *ngIf="form.get('cep')?.hasError('minlength')"
        >O campo deve ter no mínimo 8 caracteres</span
      >

      <span *ngIf="form.get('cep')?.hasError('cepNaoEncontrado')"
        >CEP não encontrado</span
      >
    </mat-error>
  </mat-form-field>
  <mat-form-field appearance="fill">
    <mat-label>Logradouro</mat-label>
    <input
      type="text"
      matInput
      placeholder="Digite algo"
      formControlName="logradouro"
      [readonly]="true"
    />
    <mat-error
      *ngIf="
        form.get('logradouro')?.invalid &&
        (form.get('logradouro')?.dirty || form.get('cep')?.touched)
      "
    >
      <span *ngIf="form.get('logradouro')?.hasError('required')"
        >O campo é obrigatório</span
      >
    </mat-error>
  </mat-form-field>
  <button
    mat-raised-button
    [disabled]="form.invalid || form.pristine"
    (click)="submeterFormulario()"
  >
    Salvar
  </button>
  <button mat-raised-button matDialogClose>Cancelar</button>
</form>
